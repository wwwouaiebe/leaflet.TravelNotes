/**
 * 
 * @source: https://github.com/wwwouaiebe/leaflet.TravelNotes
 * 
 * @licstart  The following is the entire license notice for the
 * JavaScript code in this page.
 * 
 * leaflet.travelnotes - version 3.0.0
 * Build 02783 - 2021-09-09T15:34:56+0200 
 * Copyright 2017 2021 wwwouaiebe 
 * Contact: https://www.ouaie.be/
 * License: GPL-3.0
 * 
 * The JavaScript code in this page is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 * 
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 * 
 * @licend  The above is the entire license notice
 * for the JavaScript code in this page.
 * 
 */


!function(){"use strict";
/**
	@------------------------------------------------------------------------------------------------------------------------------

	@file Constants.js
	@copyright Copyright - 2017 2021 - wwwouaiebe - Contact: https://www.ouaie.be/
	@license GNU General Public License
	@private

	@------------------------------------------------------------------------------------------------------------------------------
	*/Object.freeze({minColorValue:0,maxColorValue:255,rowsNumber:6,cellsNumber:6,deltaColor:51,sliderMaxValue:100,sliderStep:20,initialRed:0}),Object.freeze({notSaved:"ðŸ”´",modified:"ðŸŸ¡",saved:"ðŸŸ¢"});const e=Object.freeze({fixed:2,invalid:-1,defaultValue:0,metersInKm:1e3});Object.freeze({refusedByUser:-1,disabled:0,inactive:1,active:2}),Object.freeze({invalidPane:"43a6a53e-008a-4910-80a6-7a87d301ea15",itineraryPane:"8fbf0da7-4e6f-4bc7-8e20-1388461ccde7",travelNotesPane:"dffe782b-07df-4b81-a318-f287c0cf5ec6",searchPane:"228f00d7-43a8-4c13-897d-70400cb6dd58"});const t=Object.freeze({fixed:2,defaultValue:0}),r=Object.freeze({defaultValue:0,fixed:6,maxLat:90,minLat:-90,maxLng:180,minLng:-180});Object.freeze({notEdited:0,editedNoChange:1,editedChanged:2}),Object.freeze({margin:100,height:500,width:1e3,yDeltaText:30,xDeltaText:10,vScales:[1,2,5,10,20,50,100,200,500,1e3,2e3,5e3],hScales:[1,2,5,10,20,50,100,200,500,1e3,2e3,5e3,1e4,2e4,5e4,1e5]}),Object.freeze({width:40,height:40,svgViewboxDim:200}),Object.freeze({d0:0,d90:90,d180:180,d270:270,d360:360,d540:540,toRadians:Math.PI/180,fromRadians:180/Math.PI}),Object.freeze({atStart:-1,onRoute:0,atEnd:1});const i=new class{_python2Round(e){return Math.floor(Math.abs(e)+.5)*(0<=e?1:-1)}_encodeDelta(e,t,r){let i=this._python2Round(e*r),a=this._python2Round(t*r),s=i-a;s<<=1,0>i-a&&(s=~s);let n="";for(;32<=s;)n+=String.fromCharCode(63+(32|31&s)),s>>=5;return n+=String.fromCharCode(s+63),n}_index=0;_decodeDelta(e){let t=null,r=0,i=0;do{t=e.charCodeAt(this._index++)-63,i|=(31&t)<<r,r+=5}while(32<=t);return 1&i?~(i>>1):i>>1}constructor(){}encode(e,t){if(!e.length)return"";let r=t.length,i=Array.from(t,(e=>Math.pow(10,e))),a="";for(let t=0;t<r;t++)a+=this._encodeDelta(e[0][t],0,i[t]);for(let t=1;t<e.length;t++){let s=e[t],n=e[t-1];for(let e=0;e<r;e++)a+=this._encodeDelta(s[e],n[e],i[e])}return a}decode(e,t){let r=t.length;if(!e||0===e.length)return[];this._index=0;let i=[],a=Array.from(t,(e=>Math.pow(10,e))),s=new Array(r).fill(0);for(;this._index<e.length;){let t=new Array(r).fill(0);for(let i=0;i<r;i++)s[i]+=this._decodeDelta(e),t[i]=s[i]/a[i];i.push(t)}return i}};class a{static _objId=0;static get nextObjId(){return++a._objId}}
/**
	@------------------------------------------------------------------------------------------------------------------------------

	@file Version.js
	@copyright Copyright - 2017 2021 - wwwouaiebe - Contact: https://www.ouaie.be/
	@license GNU General Public License
	@private

	@------------------------------------------------------------------------------------------------------------------------------
	*/const s="2.3.0";class n{_objTypeName="";_validObjTypeNames=["Itinerary","ItineraryPoint","Maneuver","Note","Route","Travel","WayPoint"];constructor(e){if(-1===this._validObjTypeNames.indexOf(e))throw new Error("Invalid ObjType name : "+e);this._objTypeName=e}get name(){return this._objTypeName}get version(){return s}get jsonObject(){return{name:this._objTypeName,version:s}}validate(e){if(!Object.getOwnPropertyNames(e).includes("name"))throw new Error("No name for "+this._objTypeName);if(this._objTypeName!==e.name)throw new Error("Invalid name for "+this._objTypeName);if(!Object.getOwnPropertyNames(e).includes("version"))throw new Error("No version for "+this._objTypeName)}}const o=new n("ItineraryPoint");class l{_objId=-1;_upgradeObject(e){switch(e.objType.version){case"1.0.0":case"1.1.0":case"1.2.0":case"1.3.0":case"1.4.0":case"1.5.0":case"1.6.0":e.elev=t.defaultValue;case"1.7.0":case"1.7.1":case"1.8.0":case"1.9.0":case"1.10.0":case"1.11.0":case"1.12.0":case"1.13.0":case"2.0.0":case"2.1.0":case"2.2.0":e.objType.version="2.3.0";break;default:throw new Error("invalid version for "+o.name)}}_validateObject(e){if(!Object.getOwnPropertyNames(e).includes("objType"))throw new Error("No objType for "+o.name);o.validate(e.objType),o.version!==e.objType.version&&this._upgradeObject(e);let t=Object.getOwnPropertyNames(e);return["lat","lng","distance","elev","objId"].forEach((e=>{if(!t.includes(e))throw new Error("No "+e+" for "+o.name)})),e}constructor(){this.lat=r.defaultValue,this.lng=r.defaultValue,this.distance=e.defaultValue,this.elev=t.defaultValue,this._objId=a.nextObjId}get latLng(){return[this.lat,this.lng]}set latLng(e){this.lat=e[0],this.lng=e[1]}get objType(){return o}get objId(){return this._objId}get jsonObject(){return{lat:parseFloat(this.lat.toFixed(r.fixed)),lng:parseFloat(this.lng.toFixed(r.fixed)),distance:parseFloat(this.distance.toFixed(e.fixed)),elev:parseFloat(this.elev.toFixed(t.fixed)),objId:this._objId,objType:o.jsonObject}}set jsonObject(i){let s=this._validateObject(i);this.lat=s.lat||r.defaultValue,this.lng=s.lng||r.defaultValue,this.distance=s.distance||e.defaultValue,this.elev=s.elev||t.defaultValue,this._objId=a.nextObjId,this.validateData()}validateData(){"number"!=typeof this.lat&&(this.lat=r.defaultValue),"number"!=typeof this.lng&&(this.lng=r.defaultValue),"number"!=typeof this.distance&&(this.distance=e.defaultValue),"number"!=typeof this.elev&&(this.elev=t.defaultValue)}}const d=Object.freeze(new class{_validityMap=new Map;_parser=new DOMParser;_addHtmlEntities(e){return e.replaceAll(/</g,"&lt;").replaceAll(/>/g,"&gt;").replaceAll(/"/g,"&quot;").replaceAll(/\u0027/g,"&apos;").replaceAll(/\u0a00/g,"&nbsp;")}_stringify(e){let t="",r="",i=e.childNodes;for(let a=0;a<i.length;a++){let i=e.childNodes[a],s=i.nodeName.toLowerCase(),n=this._validityMap.get(s);if(n){n=n.concat(["id","class","dir","title","tanwidth","tanheight"]);let e="svg"===s||"text"===s||"polyline"===s;t+="<"+s,i.hasAttribute("target")&&(t+=' rel="noopener noreferrer"'),n.forEach((a=>{if(e)i.hasAttributeNS(null,a)&&(t+=" "+a+'="'+this._addHtmlEntities(i.getAttribute(a))+'"',i.removeAttribute(a));else if(i.hasAttribute(a))if("href"===a||"src"===a){let e=this.sanitizeToUrl(i.getAttribute(a),a).url;""===e?r+="\nAn invalid url ("+i.getAttribute(a)+") was removed from a "+a+" attribute":t+=" "+a+'="'+e+'"',i.removeAttribute(a)}else t+=" "+a+'="'+this._addHtmlEntities(i.getAttribute(a))+'"',i.removeAttribute(a)})),t+=">";let a="",o="";[a,o]=this._stringify(i),t+=a,r+=o,t+="</"+s+">"}else"#text"===s?t+=this._addHtmlEntities(i.nodeValue):r+="\nAn invalid tag "+s+" was removed";if(i.hasAttributes)for(let e=0;e<i.attributes.length;e++)"rel"!==i.attributes[e].name&&(r+="\nAn unsecure attribute "+i.attributes[e].name+'="'+i.attributes[e].value+'" was removed.')}return[t,r]}_cloneNode(e,t){let r=e.childNodes;for(let i=0;i<r.length;i++){let r=e.childNodes[i],a=r.nodeName.toLowerCase(),s=this._validityMap.get(a);if(s){s=s.concat(["id","class","dir","title","tanwidth","tanheight"]);let e="svg"===a||"text"===a||"polyline"===a,i=e?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a);if(s.forEach((t=>{if(e)r.hasAttributeNS(null,t)&&(i.setAttributeNS(null,t,r.getAttribute(t)),r.removeAttributeNS(null,t));else if(r.hasAttribute(t))if("href"===t||"src"===t){let e=this.sanitizeToUrl(r.getAttribute(t),t).url;""!==e&&i.setAttribute(t,e)}else i.setAttribute(t,r.getAttribute(t))})),r.hasAttribute("style")){r.getAttribute("style").split(";").forEach((e=>{let t=e.split(":");2!==t.length||"width"!==t[0].trim()&&"height"!==t[0].trim()||(i.style[t[0].trim()]=t[1].trim())}))}r.hasAttribute("target")&&i.setAttribute("rel","noopener noreferrer"),t.appendChild(i),this._cloneNode(r,i)}else"#text"===a&&t.appendChild(document.createTextNode(r.nodeValue))}}constructor(){this._validityMap.set("a",["href","target"]),this._validityMap.set("div",[]),this._validityMap.set("del",[]),this._validityMap.set("em",[]),this._validityMap.set("figcaption",[]),this._validityMap.set("figure",[]),this._validityMap.set("h1",[]),this._validityMap.set("h2",[]),this._validityMap.set("h3",[]),this._validityMap.set("h4",[]),this._validityMap.set("h5",[]),this._validityMap.set("h6",[]),this._validityMap.set("hr",[]),this._validityMap.set("img",["src","alt","width","height"]),this._validityMap.set("ins",[]),this._validityMap.set("li",[]),this._validityMap.set("mark",[]),this._validityMap.set("ol",[]),this._validityMap.set("p",[]),this._validityMap.set("s",[]),this._validityMap.set("small",[]),this._validityMap.set("strong",[]),this._validityMap.set("span",[]),this._validityMap.set("sub",[]),this._validityMap.set("sup",[]),this._validityMap.set("ul",[]),this._validityMap.set("svg",["xmlns","viewBox","class"]),this._validityMap.set("text",["x","y","text-anchor"]),this._validityMap.set("polyline",["points","class","transform"])}sanitizeToColor(e){let t=e.match(/^\u0023[0-9,A-F,a-f]{6}$/);return t?t[0]:null}sanitizeToUrl(e,t="href"){let r=this._parser.parseFromString("<div>"+e+"</div>","text/html");if(!r||"#document"!==r.nodeName)return{url:"",errorsString:"Parsing error"};let i=r.body.firstChild,a="";for(let e=0;e<i.childNodes.length;e++){if("#text"!==i.childNodes[e].nodeName)return{url:"",errorsString:"Invalid characters found in the url"};a+=i.childNodes[e].nodeValue}if(a=a.replaceAll(/</g,"").replaceAll(/>/g,"").replaceAll(/"/g,"").replaceAll(/\u0027/g,"").replaceAll(/&lt;/g,"").replaceAll(/&gt;/g,"").replaceAll(/&quot;/g,"").replaceAll(/&apos;/g,"").replaceAll(/%3C/g,"").replaceAll(/%3c/g,"").replaceAll(/%3E/g,"").replaceAll(/%3e/g,"").replaceAll(/%22/g,"").replaceAll(/%27/g,""),a!==e)return{url:"",errorsString:"Invalid characters found in the url"};let s=["https:"];if("http:"!==window.location.protocol&&"href"!==t||s.push("http:"),"href"===t){s.push("mailto:"),s.push("sms:"),s.push("tel:");let e=a.match(/^\u0023\w*/);if(e&&a===e[0])return{url:a,errorsString:""}}"src"===t&&s.push("data:");let n=null;try{n=new URL(a)}catch(e){return{url:"",errorsString:"Invalid url string"}}if(-1===s.indexOf(n.protocol))return{url:"",errorsString:"Invalid protocol "+n.protocol};if(-1!==["sms:","tel:"].indexOf(n.protocol)&&n.pathname.match(/^\+[0-9,*,\u0023]*$/))return{url:a,errorsString:""};try{encodeURIComponent(n.href)}catch(e){return{url:"",errorsString:"Invalid character in url"}}return{url:a,errorsString:""}}sanitizeToJsString(e){let t=this._parser.parseFromString("<div>"+e+"</div>","text/html");if(!t||"#document"!==t.nodeName)return"";let r=t.body.firstChild,i="";for(let e=0;e<r.childNodes.length;e++){if("#text"!==r.childNodes[e].nodeName)return"";i+=r.childNodes[e].nodeValue}return i=i.replaceAll(/</g,"â‰º").replaceAll(/>/g,"â‰»").replaceAll(/"/g,"â€³").replaceAll(/\u0027/g,"â€²"),i}sanitizeToHtmlElement(e,t){let r=this._parser.parseFromString("<div>"+e+"</div>","text/html");r&&"#document"===r.nodeName?this._cloneNode(r.body.firstChild,t):t.textContent=""}clone(e){let t=document.createElement(e.tagName);return this._cloneNode(e,t),t}sanitizeToHtmlString(e){let t="",r="",i=this._parser.parseFromString("<div>"+e.replace("&nbsp;","à¨€")+"</div>","text/html");return i&&"#document"===i.nodeName?([t,r]=this._stringify(i.body.firstChild,r),{htmlString:t,errorsString:r}):{htmlString:"",errorsString:"Parsing error"}}}),u=new n("Maneuver");class h{_objId=-1;_upgradeObject(t){switch(t.objType.version){case"1.0.0":case"1.1.0":case"1.2.0":case"1.3.0":case"1.4.0":case"1.5.0":case"1.6.0":case"1.7.0":case"1.7.1":case"1.8.0":case"1.9.0":case"1.10.0":case"1.11.0":"kArriveDefault"===t.iconName&&(t.distance=e.defaultValue);case"1.12.0":case"1.13.0":case"2.0.0":case"2.1.0":case"2.2.0":t.objType.version="2.3.0";break;default:throw new Error("invalid version for "+u.name)}}_validateObject(e){if(!Object.getOwnPropertyNames(e).includes("objType"))throw new Error("No objType for "+u.name);u.validate(e.objType),u.version!==e.objType.version&&this._upgradeObject(e);let t=Object.getOwnPropertyNames(e);return["iconName","instruction","distance","duration","itineraryPointObjId","objId"].forEach((e=>{if(!t.includes(e))throw new Error("No "+e+" for "+u.name)})),e}constructor(){this.iconName="",this.instruction="",this.itineraryPointObjId=-1,this.distance=e.defaultValue,this.duration=e.defaultValue,this._objId=a.nextObjId}get objType(){return u}get objId(){return this._objId}get jsonObject(){return{iconName:this.iconName,instruction:this.instruction,distance:parseFloat(this.distance.toFixed(e.fixed)),duration:this.duration,itineraryPointObjId:this.itineraryPointObjId,objId:this._objId,objType:u.jsonObject}}set jsonObject(t){let r=this._validateObject(t);this.iconName=r.iconName||"",this.instruction=r.instruction||"",this.distance=r.distance||e.defaultValue,this.duration=r.duration||e.defaultValue,this.itineraryPointObjId=r.itineraryPointObjId||-1,this._objId=a.nextObjId,this.validateData()}validateData(){"string"==typeof this.iconName?this.iconName=d.sanitizeToJsString(this.iconName):this.iconName="","string"==typeof this.instruction?this.instruction=d.sanitizeToJsString(this.instruction):this.instruction="","number"!=typeof this.distance&&(this.distance=e.defaultValue),"number"!=typeof this.duration&&(this.duration=e.defaultValue),"number"!=typeof this.itineraryPointObjId&&(this.itineraryPointObjId=-1)}}
/**
	@------------------------------------------------------------------------------------------------------------------------------

	@file BaseRouteProvider.js
	@copyright Copyright - 2017 2021 - wwwouaiebe - Contact: https://www.ouaie.be/
	@license GNU General Public License
	@private

	@------------------------------------------------------------------------------------------------------------------------------
	*/const c=["kTurnLeft","kTurnRight","kTurnSharpLeft","kTurnSharpRight","kTurnSlightLeft","kTurnSlightRight","kContinueStraight","kRoundaboutRight","kRoundaboutExit","kUturnLeft","kArriveDefault","kDepartDefault","kStayLeft","kStayRight"];window.TaN.addProvider(class extends class{_userLanguage="fr";_providerKey="";_route=null;_getRoute(e,t){}constructor(){}get icon(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAArSURBVEhL7cyxDQAgAAQh91/67ektTI4BOHumGtWoRjWqUY1qVKMaP9bbBZKXggu6NeCUAAAAAElFTkSuQmCC"}getPromiseRoute(e){return this._route=e,new Promise(((e,t)=>this._getRoute(e,t)))}get name(){return""}get title(){return""}get transitModes(){return[]}get providerKeyNeeded(){return!0}get providerKey(){return this._providerKey.length}set providerKey(e){this._providerKey=e}get userLanguage(){return this._userLanguage}set userLanguage(e){this._userLanguage=e}}{_userLanguage="fr";_providerKey="";_route=null;_parseResponse(e,t,r){if(!e.routes||0===e.routes.length)return void r(new Error("Route not found"));e.routes[0].geometry=i.decode(e.routes[0].geometry,[5,5,2]),this._route.itinerary.itineraryPoints.removeAll(),this._route.itinerary.maneuvers.removeAll(),this._route.itinerary.hasProfile=!0,this._route.itinerary.ascent=0,this._route.itinerary.descent=0;let a=0,s=new l;s.lat=e.routes[0].geometry[a][0],s.lng=e.routes[0].geometry[a][1],s.elev=e.routes[0].geometry[a][2],this._route.itinerary.itineraryPoints.add(s),a++,e.routes[0].segments.forEach((t=>{t.steps.forEach((t=>{let r=new h;for(r.iconName=c[t.type]||"kUndefined",r.instruction=t.instruction,r.duration=t.duration,r.distance=t.distance,r.itineraryPointObjId=this._route.itinerary.itineraryPoints.last.objId,this._route.itinerary.maneuvers.add(r);a<=t.way_points[1];)s.lat===e.routes[0].geometry[a][0]&&s.lng===e.routes[0].geometry[a][1]||(s=new l,s.lat=e.routes[0].geometry[a][0],s.lng=e.routes[0].geometry[a][1],s.elev=e.routes[0].geometry[a][2],this._route.itinerary.itineraryPoints.add(s)),a++}))}));let n=this._route.wayPoints.iterator;e.routes[0].way_points.forEach((t=>{n.done||(n.value.latLng=e.routes[0].geometry[t])})),t(this._route)}_getUrl(){let e="https://api.openrouteservice.org/v2/directions/";switch(this._route.itinerary.transitMode){case"car":e+="driving-car";break;case"bike":e+="cycling-regular";break;case"pedestrian":e+="foot-walking";break;default:return}return e}_getRequestHeaders(){let e=new Headers;return e.append("Accept","application/json, application/geo+json, application/gpx+xml, img/png; charset=utf-8"),e.append("Content-Type","application/json"),e.append("Authorization",this._providerKey),e}_getBody(){let e=null;return this._route.wayPoints.forEach((t=>{e=e?e+",":'{"coordinates":[',e+="["+t.lng.toFixed(r.fixed)+","+t.lat.toFixed(r.fixed)+"]"})),e+='],"elevation":"true","language":"'+this.userLanguage+'"}',e}_getRoute(e,t){fetch(this._getUrl(),{method:"POST",headers:this._getRequestHeaders(),body:this._getBody()}).then((r=>{200===r.status&&r.ok?r.json().then((r=>this._parseResponse(r,e,t))):t(new Error("Invalid status "+r.status))}))}constructor(){super()}get icon(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QAzwBfAF8OMuGdAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAB3RJTUUH4QoBEgIhgj0YgQAAAmdJREFUSMftlk9LYlEYxn+WinqdaWga0owaa9RWFS2iTZt27YJu5K4bFNSqFkFEcaHvUNAmUjdCGdQHqE8QGVGRY1BpOZEFGepo+WcW43WySWYZAz6rc5/3HH7nfR84XJV/ZCTPO6iKd1IFXAFXwP8/WP3a0FutmEURQ2sr5PMkgkEi6+ukr64A6HS5SvZnUilSoRBht5v09TVVgoDF6eRDeztqg4FMPE48EODH5ibP0ejbHWvq6vg2O4umpobvskxAltHW1mKbn0drMpUADyQJvyRxubKC0W6naWwMgObxcT739nK5vMzhxARXHg+1PT20TE2VH7VZFKnW6Yj4fDzd3vIcjRLx+VDr9ZgGBv4alwqIn5wAoLNYADC2tQEg2O3kczke/X4OJInAwkJ5sHIoeXZW9JS1UnupvErFx44OAH5eXPzef34OQIMo4lhcRHA4/p2x2mgEIJtMFj1lrdQUvcz68fiYcOE7tLpKy/Q0+sZGDE1N2ObmeNjfJ+x2k43F3u5YgVQLQtGrLgAziUQJ2D86yvnSErlMhiqNhszDAwDPd3cEZJmwx8NTwfvU1cXXycnyo44HAsV8FAk2GwCJ09PSfPN5Ynt7XHu9GO12zENDf4q5HPe7u5zMzBDx+QAwWK3lwTdbW2TTacyiiNZkQltfj3lwkEwqxc329ptZ3e/skAyHqevrQ2syYZNlOl0uarq7IZcrZq40Vbz46z8QXXMzDaKIodBpMhgksrFBKhQqyfZAkopnvvT3YxkeJnZ4SHhtDYvTieBwoBYEsskkj0dHRLxesvF4eXDlra6AK+AKuAIup1+E4uxBnFG6zQAAAABJRU5ErkJggg=="}getPromiseRoute(e){return this._route=e,new Promise(((e,t)=>this._getRoute(e,t)))}get name(){return"OpenRouteService"}get title(){return"OpenRouteService"}get transitModes(){return["bike","pedestrian","car"]}get providerKeyNeeded(){return!0}get providerKey(){return this._providerKey.length}set providerKey(e){this._providerKey=e}get userLanguage(){return this._userLanguage}set userLanguage(e){this._userLanguage=e}})}();