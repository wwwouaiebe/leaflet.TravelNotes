/**
 * 
 * @source: https://github.com/wwwouaiebe/leaflet.TravelNotes
 * 
 * @licstart  The following is the entire license notice for the
 * JavaScript code in this page.
 * 
 * leaflet.travelnotes - version 3.0.0
 * Build 02741 - 2021-09-07T15:58:21+0200 
 * Copyright 2017 2021 wwwouaiebe 
 * Contact: https://www.ouaie.be/
 * License: GPL-3.0
 * 
 * The JavaScript code in this page is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 * 
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 * 
 * @licend  The above is the entire license notice
 * for the JavaScript code in this page.
 * 
 */


!function(){"use strict";
/**
	@------------------------------------------------------------------------------------------------------------------------------

	@file Constants.js
	@copyright Copyright - 2017 2021 - wwwouaiebe - Contact: https://www.ouaie.be/
	@license GNU General Public License
	@private

	@------------------------------------------------------------------------------------------------------------------------------
	*/Object.freeze({minColorValue:0,maxColorValue:255,rowsNumber:6,cellsNumber:6,deltaColor:51,sliderMaxValue:100,sliderStep:20,initialRed:0}),Object.freeze({notSaved:"ðŸ”´",modified:"ðŸŸ¡",saved:"ðŸŸ¢"});const e=Object.freeze({fixed:2,invalid:-1,defaultValue:0,metersInKm:1e3});Object.freeze({refusedByUser:-1,disabled:0,inactive:1,active:2}),Object.freeze({invalidPane:"43a6a53e-008a-4910-80a6-7a87d301ea15",itineraryPane:"8fbf0da7-4e6f-4bc7-8e20-1388461ccde7",travelNotesPane:"dffe782b-07df-4b81-a318-f287c0cf5ec6",searchPane:"228f00d7-43a8-4c13-897d-70400cb6dd58"});const t=Object.freeze({fixed:2,defaultValue:0}),r=Object.freeze({defaultValue:0,fixed:6,maxLat:90,minLat:-90,maxLng:180,minLng:-180});Object.freeze({notEdited:0,editedNoChange:1,editedChanged:2}),Object.freeze({margin:100,height:500,width:1e3,yDeltaText:30,xDeltaText:10,vScales:[1,2,5,10,20,50,100,200,500,1e3,2e3,5e3],hScales:[1,2,5,10,20,50,100,200,500,1e3,2e3,5e3,1e4,2e4,5e4,1e5]}),Object.freeze({width:40,height:40,svgViewboxDim:200});const i=Object.freeze({d0:0,d90:90,d180:180,d270:270,d360:360,d540:540,toRadians:Math.PI/180,fromRadians:180/Math.PI});Object.freeze({atStart:-1,onRoute:0,atEnd:1});const a=new class{#normalizeLng(e){return(e+i.d540)%i.d360-i.d180}constructor(){Object.freeze(this)}arcFromSummitArcArc(e,t,r){return Math.acos(Math.cos(t)*Math.cos(r)+Math.sin(t)*Math.sin(r)*Math.cos(e))}summitFromArcArcArc(e,t,r){return Math.acos((Math.cos(r)-Math.cos(e)*Math.cos(t))/(Math.sin(e)*Math.sin(t)))}pointsDistance(e,t){if(e[0]===t[0]&&e[1]===t[1])return 0;let r=e[0]*i.toRadians,a=t[0]*i.toRadians,s=(this.#normalizeLng(t[1])-this.#normalizeLng(e[1]))*i.toRadians;return 6371e3*Math.acos(Math.sin(r)*Math.sin(a)+Math.cos(r)*Math.cos(a)*Math.cos(s))}};class s{static#objId=0;static get nextObjId(){return++s.#objId}}
/**
	@------------------------------------------------------------------------------------------------------------------------------

	@file Version.js
	@copyright Copyright - 2017 2021 - wwwouaiebe - Contact: https://www.ouaie.be/
	@license GNU General Public License
	@private

	@------------------------------------------------------------------------------------------------------------------------------
	*/const n="2.3.0";class o{#objTypeName="";#validObjTypeNames=["Itinerary","ItineraryPoint","Maneuver","Note","Route","Travel","WayPoint"];constructor(e){if(-1===this.#validObjTypeNames.indexOf(e))throw new Error("Invalid ObjType name : "+e);this.#objTypeName=e,Object.freeze(this)}get name(){return this.#objTypeName}get version(){return n}get jsonObject(){return{name:this.#objTypeName,version:n}}validate(e){if(!Object.getOwnPropertyNames(e).includes("name"))throw new Error("No name for "+this.#objTypeName);if(this.#objTypeName!==e.name)throw new Error("Invalid name for "+this.#objTypeName);if(!Object.getOwnPropertyNames(e).includes("version"))throw new Error("No version for "+this.#objTypeName)}}const l=new o("ItineraryPoint");class d{#objId=-1;#upgradeObject(e){switch(e.objType.version){case"1.0.0":case"1.1.0":case"1.2.0":case"1.3.0":case"1.4.0":case"1.5.0":case"1.6.0":e.elev=t.defaultValue;case"1.7.0":case"1.7.1":case"1.8.0":case"1.9.0":case"1.10.0":case"1.11.0":case"1.12.0":case"1.13.0":case"2.0.0":case"2.1.0":case"2.2.0":e.objType.version="2.3.0";break;default:throw new Error("invalid version for "+l.name)}}#validateObject(e){if(!Object.getOwnPropertyNames(e).includes("objType"))throw new Error("No objType for "+l.name);l.validate(e.objType),l.version!==e.objType.version&&this.#upgradeObject(e);let t=Object.getOwnPropertyNames(e);return["lat","lng","distance","elev","objId"].forEach((e=>{if(!t.includes(e))throw new Error("No "+e+" for "+l.name)})),e}constructor(){this.lat=r.defaultValue,this.lng=r.defaultValue,this.distance=e.defaultValue,this.elev=t.defaultValue,this.#objId=s.nextObjId,Object.seal(this)}get latLng(){return[this.lat,this.lng]}set latLng(e){this.lat=e[0],this.lng=e[1]}get objType(){return l}get objId(){return this.#objId}get jsonObject(){return{lat:parseFloat(this.lat.toFixed(r.fixed)),lng:parseFloat(this.lng.toFixed(r.fixed)),distance:parseFloat(this.distance.toFixed(e.fixed)),elev:parseFloat(this.elev.toFixed(t.fixed)),objId:this.#objId,objType:l.jsonObject}}set jsonObject(i){let a=this.#validateObject(i);this.lat=a.lat||r.defaultValue,this.lng=a.lng||r.defaultValue,this.distance=a.distance||e.defaultValue,this.elev=a.elev||t.defaultValue,this.#objId=s.nextObjId,this.validateData()}validateData(){"number"!=typeof this.lat&&(this.lat=r.defaultValue),"number"!=typeof this.lng&&(this.lng=r.defaultValue),"number"!=typeof this.distance&&(this.distance=e.defaultValue),"number"!=typeof this.elev&&(this.elev=t.defaultValue)}}const u=Object.freeze(new class{#validityMap=new Map;#parser=new DOMParser;#addHtmlEntities(e){return e.replaceAll(/</g,"&lt;").replaceAll(/>/g,"&gt;").replaceAll(/"/g,"&quot;").replaceAll(/\u0027/g,"&apos;").replaceAll(/\u0a00/g,"&nbsp;")}#stringify(e){let t="",r="",i=e.childNodes;for(let a=0;a<i.length;a++){let i=e.childNodes[a],s=i.nodeName.toLowerCase(),n=this.#validityMap.get(s);if(n){n=n.concat(["id","class","dir","title","tanwidth","tanheight"]);let e="svg"===s||"text"===s||"polyline"===s;t+="<"+s,i.hasAttribute("target")&&(t+=' rel="noopener noreferrer"'),n.forEach((a=>{if(e)i.hasAttributeNS(null,a)&&(t+=" "+a+'="'+this.#addHtmlEntities(i.getAttribute(a))+'"',i.removeAttribute(a));else if(i.hasAttribute(a))if("href"===a||"src"===a){let e=this.sanitizeToUrl(i.getAttribute(a),a).url;""===e?r+="\nAn invalid url ("+i.getAttribute(a)+") was removed from a "+a+" attribute":t+=" "+a+'="'+e+'"',i.removeAttribute(a)}else t+=" "+a+'="'+this.#addHtmlEntities(i.getAttribute(a))+'"',i.removeAttribute(a)})),t+=">";let a="",o="";[a,o]=this.#stringify(i),t+=a,r+=o,t+="</"+s+">"}else"#text"===s?t+=this.#addHtmlEntities(i.nodeValue):r+="\nAn invalid tag "+s+" was removed";if(i.hasAttributes)for(let e=0;e<i.attributes.length;e++)"rel"!==i.attributes[e].name&&(r+="\nAn unsecure attribute "+i.attributes[e].name+'="'+i.attributes[e].value+'" was removed.')}return[t,r]}#cloneNode(e,t){let r=e.childNodes;for(let i=0;i<r.length;i++){let r=e.childNodes[i],a=r.nodeName.toLowerCase(),s=this.#validityMap.get(a);if(s){s=s.concat(["id","class","dir","title","tanwidth","tanheight"]);let e="svg"===a||"text"===a||"polyline"===a,i=e?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a);if(s.forEach((t=>{if(e)r.hasAttributeNS(null,t)&&(i.setAttributeNS(null,t,r.getAttribute(t)),r.removeAttributeNS(null,t));else if(r.hasAttribute(t))if("href"===t||"src"===t){let e=this.sanitizeToUrl(r.getAttribute(t),t).url;""!==e&&i.setAttribute(t,e)}else i.setAttribute(t,r.getAttribute(t))})),r.hasAttribute("style")){r.getAttribute("style").split(";").forEach((e=>{let t=e.split(":");2!==t.length||"width"!==t[0].trim()&&"height"!==t[0].trim()||(i.style[t[0].trim()]=t[1].trim())}))}r.hasAttribute("target")&&i.setAttribute("rel","noopener noreferrer"),t.appendChild(i),this.#cloneNode(r,i)}else"#text"===a&&t.appendChild(document.createTextNode(r.nodeValue))}}constructor(){this.#validityMap.set("a",["href","target"]),this.#validityMap.set("div",[]),this.#validityMap.set("del",[]),this.#validityMap.set("em",[]),this.#validityMap.set("figcaption",[]),this.#validityMap.set("figure",[]),this.#validityMap.set("h1",[]),this.#validityMap.set("h2",[]),this.#validityMap.set("h3",[]),this.#validityMap.set("h4",[]),this.#validityMap.set("h5",[]),this.#validityMap.set("h6",[]),this.#validityMap.set("hr",[]),this.#validityMap.set("img",["src","alt","width","height"]),this.#validityMap.set("ins",[]),this.#validityMap.set("li",[]),this.#validityMap.set("mark",[]),this.#validityMap.set("ol",[]),this.#validityMap.set("p",[]),this.#validityMap.set("s",[]),this.#validityMap.set("small",[]),this.#validityMap.set("strong",[]),this.#validityMap.set("span",[]),this.#validityMap.set("sub",[]),this.#validityMap.set("sup",[]),this.#validityMap.set("ul",[]),this.#validityMap.set("svg",["xmlns","viewBox","class"]),this.#validityMap.set("text",["x","y","text-anchor"]),this.#validityMap.set("polyline",["points","class","transform"]),Object.freeze(this)}sanitizeToColor(e){let t=e.match(/^\u0023[0-9,A-F,a-f]{6}$/);return t?t[0]:null}sanitizeToUrl(e,t="href"){let r=this.#parser.parseFromString("<div>"+e+"</div>","text/html");if(!r||"#document"!==r.nodeName)return{url:"",errorsString:"Parsing error"};let i=r.body.firstChild,a="";for(let e=0;e<i.childNodes.length;e++){if("#text"!==i.childNodes[e].nodeName)return{url:"",errorsString:"Invalid characters found in the url"};a+=i.childNodes[e].nodeValue}if(a=a.replaceAll(/</g,"").replaceAll(/>/g,"").replaceAll(/"/g,"").replaceAll(/\u0027/g,"").replaceAll(/&lt;/g,"").replaceAll(/&gt;/g,"").replaceAll(/&quot;/g,"").replaceAll(/&apos;/g,"").replaceAll(/%3C/g,"").replaceAll(/%3c/g,"").replaceAll(/%3E/g,"").replaceAll(/%3e/g,"").replaceAll(/%22/g,"").replaceAll(/%27/g,""),a!==e)return{url:"",errorsString:"Invalid characters found in the url"};let s=["https:"];if("http:"!==window.location.protocol&&"href"!==t||s.push("http:"),"href"===t){s.push("mailto:"),s.push("sms:"),s.push("tel:");let e=a.match(/^\u0023\w*/);if(e&&a===e[0])return{url:a,errorsString:""}}"src"===t&&s.push("data:");let n=null;try{n=new URL(a)}catch(e){return{url:"",errorsString:"Invalid url string"}}if(-1===s.indexOf(n.protocol))return{url:"",errorsString:"Invalid protocol "+n.protocol};if(-1!==["sms:","tel:"].indexOf(n.protocol)&&n.pathname.match(/^\+[0-9,*,\u0023]*$/))return{url:a,errorsString:""};try{encodeURIComponent(n.href)}catch(e){return{url:"",errorsString:"Invalid character in url"}}return{url:a,errorsString:""}}sanitizeToJsString(e){let t=this.#parser.parseFromString("<div>"+e+"</div>","text/html");if(!t||"#document"!==t.nodeName)return"";let r=t.body.firstChild,i="";for(let e=0;e<r.childNodes.length;e++){if("#text"!==r.childNodes[e].nodeName)return"";i+=r.childNodes[e].nodeValue}return i=i.replaceAll(/</g,"â‰º").replaceAll(/>/g,"â‰»").replaceAll(/"/g,"â€³").replaceAll(/\u0027/g,"â€²"),i}sanitizeToHtmlElement(e,t){let r=this.#parser.parseFromString("<div>"+e+"</div>","text/html");r&&"#document"===r.nodeName?this.#cloneNode(r.body.firstChild,t):t.textContent=""}clone(e){let t=document.createElement(e.tagName);return this.#cloneNode(e,t),t}sanitizeToHtmlString(e){let t="",r="",i=this.#parser.parseFromString("<div>"+e.replace("&nbsp;","à¨€")+"</div>","text/html");return i&&"#document"===i.nodeName?([t,r]=this.#stringify(i.body.firstChild,r),{htmlString:t,errorsString:r}):{htmlString:"",errorsString:"Parsing error"}}}),c=new o("Maneuver");class h{#objId=-1;#upgradeObject(t){switch(t.objType.version){case"1.0.0":case"1.1.0":case"1.2.0":case"1.3.0":case"1.4.0":case"1.5.0":case"1.6.0":case"1.7.0":case"1.7.1":case"1.8.0":case"1.9.0":case"1.10.0":case"1.11.0":"kArriveDefault"===t.iconName&&(t.distance=e.defaultValue);case"1.12.0":case"1.13.0":case"2.0.0":case"2.1.0":case"2.2.0":t.objType.version="2.3.0";break;default:throw new Error("invalid version for "+c.name)}}#validateObject(e){if(!Object.getOwnPropertyNames(e).includes("objType"))throw new Error("No objType for "+c.name);c.validate(e.objType),c.version!==e.objType.version&&this.#upgradeObject(e);let t=Object.getOwnPropertyNames(e);return["iconName","instruction","distance","duration","itineraryPointObjId","objId"].forEach((e=>{if(!t.includes(e))throw new Error("No "+e+" for "+c.name)})),e}constructor(){this.iconName="",this.instruction="",this.itineraryPointObjId=-1,this.distance=e.defaultValue,this.duration=e.defaultValue,this.#objId=s.nextObjId,Object.seal(this)}get objType(){return c}get objId(){return this.#objId}get jsonObject(){return{iconName:this.iconName,instruction:this.instruction,distance:parseFloat(this.distance.toFixed(e.fixed)),duration:this.duration,itineraryPointObjId:this.itineraryPointObjId,objId:this.#objId,objType:c.jsonObject}}set jsonObject(t){let r=this.#validateObject(t);this.iconName=r.iconName||"",this.instruction=r.instruction||"",this.distance=r.distance||e.defaultValue,this.duration=r.duration||e.defaultValue,this.itineraryPointObjId=r.itineraryPointObjId||-1,this.#objId=s.nextObjId,this.validateData()}validateData(){"string"==typeof this.iconName?this.iconName=u.sanitizeToJsString(this.iconName):this.iconName="","string"==typeof this.instruction?this.instruction=u.sanitizeToJsString(this.instruction):this.instruction="","number"!=typeof this.distance&&(this.distance=e.defaultValue),"number"!=typeof this.duration&&(this.duration=e.defaultValue),"number"!=typeof this.itineraryPointObjId&&(this.itineraryPointObjId=-1)}}
/**
	@------------------------------------------------------------------------------------------------------------------------------

	@file BaseRouteProvider.js
	@copyright Copyright - 2017 2021 - wwwouaiebe - Contact: https://www.ouaie.be/
	@license GNU General Public License
	@private

	@------------------------------------------------------------------------------------------------------------------------------
	*/const g=Math.PI/2,m=Object.freeze({en:Object.freeze({kStart:"Start",kContinue:"Continue",kEnd:"Stop"}),fr:Object.freeze({kStart:"DÃ©part",kContinue:"Continuer",kEnd:"ArrivÃ©e"})}),p=Object.freeze({kStart:"kDepartDefault",kContinue:"kContinueStraight",kEnd:"kArriveDefault"});window.TaN.addProvider(class extends class{#userLanguage="fr";#providerKey="";#route=null;#getRoute(e,t){}constructor(){Object.freeze(this)}get icon(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAArSURBVEhL7cyxDQAgAAQh91/67ektTI4BOHumGtWoRjWqUY1qVKMaP9bbBZKXggu6NeCUAAAAAElFTkSuQmCC"}getPromiseRoute(e){return this.#route=e,new Promise(((e,t)=>this.#getRoute(e,t)))}get name(){return""}get title(){return""}get transitModes(){return[]}get providerKeyNeeded(){return!0}get providerKey(){return this.#providerKey.length}set providerKey(e){this.#providerKey=e}get userLanguage(){return this.#userLanguage}set userLanguage(e){this.#userLanguage=e}}{#userLanguage="fr";#providerKey="";#route=null;#addManeuver(e,t){let r=new h;r.iconName=p[t],r.instruction=m[this.userLanguage]?m[this.userLanguage][t]:m.en[t],r.duration=0,r.itineraryPointObjId=e,this.#route.itinerary.maneuvers.add(r)}#addItineraryPoint(e){let t=new d;return t.latLng=e,this.#route.itinerary.itineraryPoints.add(t),t.objId}#addIntermediateItineraryPoints(e,t){let r=[e.lat*i.toRadians,e.lng*i.toRadians],s=[t.lat*i.toRadians,t.lng*i.toRadians],n=(t.lng-e.lng+i.d360)%i.d360>i.d180?-1:1,o=a.arcFromSummitArcArc(s[1]-r[1],g-r[0],g-s[0]);if(.1>o*i.fromRadians)return;let l=a.summitFromArcArcArc(g-r[0],o,g-s[0]),u=[];for(let e=1;e<=64;e++){let t=o*e/64,s=a.arcFromSummitArcArc(l,g-r[0],t),c=a.summitFromArcArcArc(g-r[0],s,t),h=new d;h.latLng=[(g-s)*i.fromRadians,(r[1]+n*c)*i.fromRadians],u.push(h)}t.lng=u.pop().lng,u.forEach((e=>this.#route.itinerary.itineraryPoints.add(e)))}#parseGreatCircle(){let e=this.#route.wayPoints.iterator,t=null;for(;!e.done;)e.first?(t=e.value,this.#addManeuver(this.#addItineraryPoint(e.value.latLng),"kStart")):(this.#addIntermediateItineraryPoints(t,e.value),this.#addManeuver(this.#addItineraryPoint(e.value.latLng),e.last?"kEnd":"kContinue"),t=e.value);let r=-Number.MAX_VALUE,a=this.#route.itinerary.itineraryPoints.iterator;for(;!a.done;)r=Math.max(r,a.value.lng);let s=r%i.d360-r;for(a=this.#route.itinerary.itineraryPoints.iterator;!a.done;)a.value.lng+=s;for(e=this.#route.wayPoints.iterator;!e.done;)e.value.lng+=s}#parseCircle(){let e=[this.#route.wayPoints.first.lat*i.toRadians,this.#route.wayPoints.first.lng*i.toRadians],t=[this.#route.wayPoints.last.lat*i.toRadians,this.#route.wayPoints.last.lng*i.toRadians],r=a.arcFromSummitArcArc(e[1]-t[1],g-e[0],g-t[0]),s=360,n=[];for(let t=0;t<=s;t++){let o=Math.PI/720+Math.PI*t/s,l=a.arcFromSummitArcArc(o,r,g-e[0]),u=a.summitFromArcArcArc(g-e[0],l,r),c=new d;c.latLng=[(g-l)*i.fromRadians,(e[1]+u)*i.fromRadians],n.push(c),c=new d,c.latLng=[(g-l)*i.fromRadians,(e[1]-u)*i.fromRadians],n.unshift(c),t===s&&(this.#addManeuver(c.objId,"kStart"),c=new d,c.latLng=[(g-l)*i.fromRadians,(e[1]-u)*i.fromRadians],this.#addManeuver(c.objId,"kEnd"),n.push(c))}n.forEach((e=>this.#route.itinerary.itineraryPoints.add(e)))}#parseResponse(e,t){try{switch(this.#route.itinerary.itineraryPoints.removeAll(),this.#route.itinerary.maneuvers.removeAll(),this.#route.itinerary.hasProfile=!1,this.#route.itinerary.ascent=0,this.#route.itinerary.descent=0,this.#route.itinerary.transitMode){case"line":this.#parseGreatCircle();break;case"circle":this.#parseCircle()}e(this.#route)}catch(e){t(e)}}constructor(){super()}get icon(){return'data:image/svg+xml;utf8,<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" > <circle cx="12" cy="12" r="3" stroke="rgb(0,0,0)" fill="transparent" /> <line x1="5" y1="17" x2="11" y2="2" stroke="rgb(0,0,0)" /> <line x1="3" y1="6" x2="17" y2="9" stroke="rgb(191,0,0)" /> <line x1="3" y1="16" x2="17" y2="5" stroke="rgb(255,204,0)" /> </svg>'}getPromiseRoute(e){return this.#route=e,new Promise(((e,t)=>this.#parseResponse(e,t)))}get name(){return"Polyline"}get title(){return"Polyline & Circle"}get transitModes(){return["line","circle"]}get providerKeyNeeded(){return!1}get providerKey(){return 1}set providerKey(e){}get userLanguage(){return this.#userLanguage}set userLanguage(e){this.#userLanguage=e}})}();